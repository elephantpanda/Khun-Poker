<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Khun Poker</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #0a5d0a; /* green background */
    color: white;
    text-align: center;
    padding-top: 50px;
  }
  .cards {
    display: flex;
    justify-content: center;
    margin: 20px;
  }
  .card {
    width: 100px;
    height: 150px;
    background-color: white;
    color: black;
    font-size: 50px;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0 20px;
    border-radius: 10px;
    cursor: pointer;
    position: relative;
  }
  .card.back {
    color: #fff;
    background: repeating-linear-gradient(
      45deg,
      #c00,
      #c00 10px,
      #900 10px,
      #900 20px
    );
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 40px;
  }
  .actions button {
    font-size: 18px;
    margin: 10px;
    padding: 12px 25px;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    background: linear-gradient(45deg, #ff4b5c, #f9d423);
    color: white;
    font-weight: bold;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    transition: transform 0.1s, box-shadow 0.1s;
  }
  .actions button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 10px rgba(0,0,0,0.4);
  }
  .actions button:active {
    transform: translateY(1px);
    box-shadow: 0 3px 5px rgba(0,0,0,0.3);
  }
  #restart-button {
    font-size: 18px;
    margin-top: 20px;
    padding: 12px 25px;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    background: linear-gradient(45deg, #3498db, #2ecc71);
    color: white;
    font-weight: bold;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    transition: transform 0.1s, box-shadow 0.1s;
  }
  #restart-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 10px rgba(0,0,0,0.4);
  }
  #restart-button:active {
    transform: translateY(1px);
    box-shadow: 0 3px 5px rgba(0,0,0,0.3);
  }
  #scoreboard {
    margin-top: 20px;
    font-size: 20px;
  }
  .pip {
    position: absolute;
    font-weight: bold;
  }
  .top-left {
    top: 5px;
    left: 5px;
    font-size: 20px;
  }
  .bottom-right {
    bottom: 5px;
    right: 5px;
    font-size: 20px;
    transform: rotate(180deg);
  }
  .center-face {
    font-size: 60px;
  }
</style>
</head>
<body>

<h1>Khun Poker</h1>
<div class="cards">
  <div id="human-card" class="card"></div>
  <div id="computer-card" class="card back">?</div>
</div>

<div class="actions">
  <button onclick="playerAction('check')">Check</button>
  <button onclick="playerAction('bet')">Bet</button>
  <button onclick="playerAction('call')">Call</button>
  <button onclick="playerAction('fold')">Fold</button>
</div>

<div id="message"></div>
<div id="scoreboard">Player: 0 | Computer: 0</div>
<button id="restart-button" onclick="restartGame()">Restart Game</button>

<script>
const cards = ['J', 'Q', 'K'];
let humanCard, computerCard;
let humanScore = 0, computerScore = 0;
let gameOver = false;

function startGame() {
  gameOver = false;
  humanCard = cards[Math.floor(Math.random() * cards.length)];
  do {
    computerCard = cards[Math.floor(Math.random() * cards.length)];
  } while (computerCard === humanCard);

  renderCard(document.getElementById('human-card'), humanCard);
  renderBack(document.getElementById('computer-card'));

  document.getElementById('message').textContent = 'Your move.';
}

function cardValue(card) {
  if (card === 'J') return 11;
  if (card === 'Q') return 12;
  if (card === 'K') return 13;
}

function renderCard(div, card) {
  div.innerHTML = '';
  div.classList.remove('back');
  div.appendChild(createPip(card, 'top-left'));
  div.appendChild(createPip(card, 'bottom-right'));
  div.appendChild(createCenterFace(card));
}

function renderBack(div) {
  div.innerHTML = '?';
  div.classList.add('back');
}

function createPip(card, cls) {
  const span = document.createElement('span');
  span.className = 'pip ' + cls;
  span.textContent = card;
  return span;
}

function createCenterFace(card) {
  const span = document.createElement('span');
  span.className = 'center-face';
  if(card === 'J') span.textContent = 'ðŸ¤´';
  if(card === 'Q') span.textContent = 'ðŸ‘¸';
  if(card === 'K') span.textContent = 'ðŸ¤´';
  return span;
}

function computerDecision(playerActionFirst) {
  const rand = Math.random();
  if (computerCard === 'K') return playerActionFirst === 'check' ? 'check' : 'call';
  if (computerCard === 'Q') {
    if (playerActionFirst === 'check') return 'check';
    else return rand < 1/3 ? 'call' : 'fold';
  }
  if (computerCard === 'J') {
    if (playerActionFirst === 'check') return rand < 1/3 ? 'bet' : 'check';
    else return 'fold';
  }
}

function playerAction(action) {
  if(gameOver) return;

  let computerAct = computerDecision(action === 'check' ? 'check' : 'bet');
  let message = `You chose ${action}. Computer chose ${computerAct}. `;

  let revealCards = false;

  if(action === 'fold') {
    computerScore++;
    message += 'You folded. Computer wins this round.';
    revealCards = true;
  } else if(action === 'check' && computerAct === 'check') {
    revealCards = true;
  } else if(action === 'bet' || action === 'call') {
    revealCards = true;
  }

  if(revealCards) {
    renderCard(document.getElementById('computer-card'), computerCard);

    let humanVal = cardValue(humanCard);
    let compVal = cardValue(computerCard);

    if(action !== 'fold') {
      if(humanVal > compVal) {
        humanScore++;
        message += 'You win this round!';
      } else {
        computerScore++;
        message += 'Computer wins this round!';
      }
    }

    gameOver = true;
    document.getElementById('scoreboard').textContent = `Player: ${humanScore} | Computer: ${computerScore}`;
  }

  document.getElementById('message').textContent = message;
}

function restartGame() {
  startGame();
}

startGame();
</script>

</body>
</html>
